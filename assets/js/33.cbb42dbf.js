(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{330:function(t,a,s){"use strict";s.r(a);var r=s(12),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"数据库分表规划"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库分表规划"}},[t._v("#")]),t._v(" 数据库分表规划")]),t._v(" "),a("MyViews"),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("小贴士")]),t._v(" "),a("p",[t._v("经过测试，如果想借助图形化界面处理数据，那么一次处理不超过20w条是比较合理的。再多就会导致超时、分配的内存用尽等等问题。20w数据处理的时间大约180s。")])]),t._v(" "),a("h2",{attrs:{id:"分表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分表"}},[t._v("#")]),t._v(" 分表")]),t._v(" "),a("p",[a("strong",[t._v("科研数据分表")])]),t._v(" "),a("p",[a("strong",[t._v("标准一：按常用/不常用字段分表")])]),t._v(" "),a("p",[t._v("计算科研总分和竞赛时，需要用到的字段仅有sch_name, probability_all_in_one, final_score三项。")]),t._v(" "),a("p",[t._v("因此，将其他论文基本信息、3项计算常用指标拆分。")]),t._v(" "),a("p",[a("strong",[t._v("标准二：按年份、国内外成果拆分")])]),t._v(" "),a("p",[t._v("由于既往数据没有月份信息，因此将学校科研成果总量分成等和的2份，根据学校名单拆分，并且按年份拆分。5年成果共2000w（其中奖项计算跨度为10年）。平均每年不到400w。此后数据按月更新，因此按月、排名前50%拆分。确保每张表数据在20w左右。")]),t._v(" "),a("p",[a("strong",[t._v("拆分结果")])]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("---")]),t._v("\ntitle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 数据库分表\n"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("flowchart")]),t._v(" LR\n    2021\n    2020\n    a"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[2022]")]),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("科研总量前5%学校科研基本信息短表\n    a"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("科研总量前5%学校科研指标计算长表\n    a"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("科研总量6-10%学校科研基本信息短表\n    a"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("科研总量前6-10%学校科研指标计算长表\n    a"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("......共40张表\n    2019\n    2018\n\n")])])])],1)}),[],!1,null,null,null);a.default=e.exports}}]);